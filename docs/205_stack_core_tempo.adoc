=== Tempo

==== Troubleshooting
. metrics_ingestion_time_range_slack: TODO document the effect and trouble shooting how to find out.
https://grafana.com/docs/tempo/latest/troubleshooting/metrics-generator/

Infinite print current time windows cmd
[source,shell]
----
@echo off
:loop
echo %time%
timeout /t 1 /nobreak >nul
goto loop
----


Infinite print current time linux shell
[source,shell]
----
while true; do date +"%T"; sleep 1; done

# or script

#!/bin/bash
while true; do
    date +"%T"
    sleep 1
done

----


Tempo metrics for ingestion errors ( mimir query )
[source,shell]
----
sum(rate(tempo_warnings_total{}[5m])) by (reason)
----



Tempo metrics for ingestion errors ( mimir query )
[source,shell]
----
1 - sum(rate(tempo_warnings_total{reason="disconnected_trace_flushed_to_wal"}[5m])) / sum(rate(tempo_ingester_traces_created_total{}[5m]))
----

Missed traces debug
[source,shell]
----
https://grafana.cloud.private/explore?schemaVersion=1&panes=%7B%229vt%22%3A%7B%22datasource%22%3A%22mimir%22%2C%22queries%22%3A%5B%7B%22refId%22%3A%22A%22%2C%22expr%22%3A%221+-+sum%28rate%28tempo_warnings_total%7Breason%3D%5C%22disconnected_trace_flushed_to_wal%5C%22%7D%5B5m%5D%29%29+%2F+sum%28rate%28tempo_ingester_traces_created_total%7B%7D%5B5m%5D%29%29%22%2C%22range%22%3Atrue%2C%22instant%22%3Atrue%2C%22datasource%22%3A%7B%22type%22%3A%22prometheus%22%2C%22uid%22%3A%22mimir%22%7D%2C%22editorMode%22%3A%22code%22%2C%22legendFormat%22%3A%22__auto%22%2C%22exemplar%22%3Afalse%2C%22hide%22%3Atrue%7D%2C%7B%22refId%22%3A%22B%22%2C%22expr%22%3A%221+-+sum%28rate%28tempo_warnings_total%7Breason%3D%5C%22rootless_trace_flushed_to_wal%5C%22%7D%5B5m%5D%29%29+%2F+sum%28rate%28tempo_ingester_traces_created_total%7B%7D%5B5m%5D%29%29%22%2C%22range%22%3Atrue%2C%22instant%22%3Atrue%2C%22datasource%22%3A%7B%22type%22%3A%22prometheus%22%2C%22uid%22%3A%22mimir%22%7D%2C%22editorMode%22%3A%22code%22%2C%22legendFormat%22%3A%22__auto%22%2C%22hide%22%3Atrue%7D%2C%7B%22refId%22%3A%22C%22%2C%22expr%22%3A%22sum%28rate%28tempo_warnings_total%7Breason%3D%5C%22disconnected_trace_flushed_to_wal%5C%22%7D%5B5m%5D%29%29+by+%28reason%29%22%2C%22range%22%3Atrue%2C%22instant%22%3Atrue%2C%22datasource%22%3A%7B%22type%22%3A%22prometheus%22%2C%22uid%22%3A%22mimir%22%7D%2C%22editorMode%22%3A%22code%22%2C%22legendFormat%22%3A%22__auto%22%2C%22hide%22%3Atrue%7D%2C%7B%22refId%22%3A%22D%22%2C%22expr%22%3A%22sum%28rate%28tempo_warnings_total%7Breason%3D%5C%22rootless_trace_flushed_to_wal%5C%22%7D%5B5m%5D%29%29+by+%28reason%29%22%2C%22range%22%3Atrue%2C%22instant%22%3Atrue%2C%22datasource%22%3A%7B%22type%22%3A%22prometheus%22%2C%22uid%22%3A%22mimir%22%7D%2C%22editorMode%22%3A%22code%22%2C%22legendFormat%22%3A%22__auto%22%2C%22hide%22%3Afalse%7D%5D%2C%22range%22%3A%7B%22from%22%3A%22now-5m%22%2C%22to%22%3A%22now%22%7D%7D%7D&orgId=1

Ingestion limits
The default limits in Tempo may not be sufficient in high-volume tracing environments. Errors including RATE_LIMITED/TRACE_TOO_LARGE/LIVE_TRACES_EXCEEDED occur when these limits are exceeded. See below for how to override these limits globally or per tenant.
See https://grafana.com/docs/tempo/latest/configuration/
----
